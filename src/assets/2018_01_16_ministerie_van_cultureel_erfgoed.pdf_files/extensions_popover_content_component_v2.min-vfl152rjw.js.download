define(["require","exports","tslib","dig-components/icons","dig-components/icons/src","dig-components/menu","modules/clean/file_store/utils","modules/clean/react/app_actions/redirect","modules/clean/react/css","modules/clean/react/extensions/cloud_docs_compat","modules/clean/react/extensions/common","modules/clean/react/extensions/data/helpers","modules/clean/react/extensions/extensions_mini_directory_modal","modules/clean/react/extensions/menu_survey","modules/clean/react/extensions/unity_and_cloud_editors","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/open_button/types","modules/clean/react/file_viewer/unity/with_unity","modules/clean/static_urls","modules/core/i18n","react"],(function(e,t,n,i,o,s,r,a,c,l,u,d,p,m,f,_,g,A,y,h,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var v=(function(e){function t(t){var i=e.call(this,t)||this;return i.createAppActionClickHandler=function(e){return function(){var t=i.props,o=t.file,s=t.user,r=t.featureFlags,c=t.telemetryContext,d=t.updateLinkState;if(a.redirectToActionOrShowAuth(s,o,e,r,c,d),"redirect"===e.handler[".tag"]){var p=u.getAppActionExtras(e);u.logEvent(i.props.currentSession,"select_action",n.__assign({menu_version:2},p))}else if("cloud_editor"===e.handler[".tag"]){var m=l.isWopiAction(e)?g.OpenButtonAction.OPEN_WITH:g.OpenButtonAction.OPEN_WITH_CLOUD_DOC;u.logEvent(i.props.currentSession,"select_legacy_action",{type:m})}}},i.wrapperForAction=function(e){return{appAction:e,handler:i.createAppActionClickHandler(e),userAction:_.UserAction.OpenWithAppAction,actionName:e.description}},i.renderActionRow=function(e){var t,n=e.icon;t=n.is_static?y.static_url("/static/images/generic_app_icon-vflIPYT1H.png"):n.url;var o=e.description;return E.default.createElement(s.Menu.ActionItem,{key:e.id,value:i.wrapperForAction(e),withLeftAccessory:E.default.createElement("img",{alt:"",src:t,width:24,height:24})},o)},i}return n.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.user,a=t.file,c=t.appActions,l=t.openOptions,_=t.bylines,g=t.categoryIdToInfos,A=t.featureFlags,y=t.currentSession,v=t.telemetryContext,O=t.updateLinkState,w=u.getOpenOptionsWithLogging(l,y),x=d.partitionOptions(w),M=x.unityOptions,C=x.cloudEditorOptions,S=d.partitionActions(c),I=S.cloudEditors,F=S.installedActions,U=S.unpromotedActions,W=F.length>0,k=U.length>0;return E.default.createElement(E.default.Fragment,null,E.default.createElement(f.UnityAndCloudEditors,{unityOptions:M,legacyCloudEditorOptions:C,cloudEditorAppActions:I.map((function(t){return e.wrapperForAction(t)})),bylines:_,currentSession:y}),W&&E.default.createElement(s.Menu.Segment,{key:"installed-actions"},F.map((function(t){return e.renderActionRow(t)}))),k&&E.default.createElement(s.Menu.Segment,null,E.default.createElement(s.Menu.ActionItem,{key:h.intl.formatMessage({id:"R/67N/",defaultMessage:"Show more"}),value:{handler:function(){var e=n.__spreadArrays(F,U);p.showExtensionsMiniDirectoryModal(h.intl.formatMessage({id:"KVD2SP",defaultMessage:"Open or edit with these apps"}),r,a,e,g,A,O,v,y),u.logEvent(y,W?"select_show_more":"select_add_app",{surface:v&&v.surface})}},withLeftAccessory:W?null:E.default.createElement(i.UIIcon,{src:o.AddCircleLine})},W?h.intl.formatMessage({id:"Gevpqz",defaultMessage:"Connect more apps"}):h.intl.formatMessage({id:"XFA09U",defaultMessage:"Connect apps"}))),E.default.createElement(m.OpenMenuSurvey,{userId:r.id,session:y}))},t})((E=n.__importDefault(E)).default.Component);t.ExtensionsPopoverV2WithUnity=function(e){return r.isBrowseFile(e.file)?E.default.createElement(A.WithUnity,{file:e.file,user:e.user,render:function(t){return E.default.createElement(v,n.__assign({},e,{unityInfo:t}))}}):null},t.ExtensionsPopoverV2NoUnity=c.requireCssWithComponent(v,["/static/css/app_actions/index-vflM3ESn8.css","/static/css/extensions/index-vflbYwcKR.css"])}));
//# sourceMappingURL=extensions_popover_content_component_v2.min.js-vfl3XHjrB.map